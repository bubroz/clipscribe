# ClipScribe Production Environment Configuration
# Copy this file to .env and configure your production values

# Required API Keys
GOOGLE_API_KEY=your_google_api_key_here
XAI_API_KEY=your_xai_api_key_here
VERTEX_AI_PROJECT=your_vertex_ai_project_id
GOOGLE_APPLICATION_CREDENTIALS=/app/secrets/service-account.json

# Cloud Storage (Optional)
GCS_BUCKET=your_gcs_bucket_name

# Application Configuration
CLIPSCRIBE_LOG_LEVEL=INFO
PYTHONUNBUFFERED=1
PYTHONPATH=/app/src

# Redis Configuration
REDIS_URL=redis://redis:6379
REDIS_MAXMEMORY=256mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# API Server Configuration
WORKER_TIMEOUT=3600
MAX_WORKERS=4
API_HOST=0.0.0.0
API_PORT=8000

# Web Interface Configuration
WEB_PORT=8080
STREAMLIT_SERVER_HEADLESS=true

# Video Processing Configuration
MAX_VIDEO_DURATION=3600
DEFAULT_VIDEO_QUALITY=720p
ENABLE_ADVANCED_EXTRACTION=true
CONFIDENCE_THRESHOLD=0.4
LANGUAGE_CONFIDENCE_THRESHOLD=0.3

# === xAI GROK CONFIGURATION (November 2025) ===

# Model Selection
# Primary: grok-4-fast-reasoning (with reasoning - best for entity extraction)
# Alternative: grok-4-fast-non-reasoning (without reasoning - faster, same cost)
# 
# Context: 2M tokens max (we use ~54K tokens avg, well under 128K threshold)
# Pricing (Standard tier <128K context):
#   - Input: $0.20 per 1M tokens
#   - Output: $0.50 per 1M tokens
#   - Cached: $0.05 per 1M tokens (75% savings!)
# Pricing (High-context tier >128K):
#   - Input: $0.40 per 1M tokens (2x more expensive)
#   - Output: $1.00 per 1M tokens (2x more expensive)
#   - Cached: $0.05 per 1M tokens (same)
#
# Our videos: 99% use standard tier, only 12+ hour videos exceed 128K
# Source: https://docs.x.ai/docs/pricing

# === GROK ADVANCED FEATURES ===

# Prompt Caching (May 2025) - 75% cost savings on repeated prompts
ENABLE_GROK_PROMPT_CACHING=true

# Fact Checking with Server-Side Tools (October 2025)
ENABLE_GROK_FACT_CHECKING=true
ENABLE_GROK_WEB_SEARCH=true
ENABLE_GROK_X_SEARCH=true
ENABLE_GROK_CODE_EXECUTION=false
FACT_CHECK_CONFIDENCE_THRESHOLD=0.7

# Knowledge Base / Collections API (August 2025)
ENABLE_KNOWLEDGE_BASE=true
GROK_COLLECTION_ID=  # Leave empty to auto-create on first run
GROK_COLLECTION_NAME=clipscribe-videos
AUTO_ADD_TO_KNOWLEDGE_BASE=true

# Structured Outputs (November 2025) - Type-safe JSON schema
ENABLE_GROK_STRUCTURED_OUTPUTS=true

# Resource Limits
MEMORY_LIMIT=2G
CPU_LIMIT=2.0

# Security Settings
ENABLE_HTTPS=false
SECRET_KEY=your_secret_key_here
ALLOWED_HOSTS=localhost,127.0.0.1

# Monitoring and Logging
ENABLE_METRICS=true
LOG_FORMAT=json
LOG_TO_FILE=true
LOG_MAX_SIZE=50MB
LOG_BACKUP_COUNT=3

# Cache Configuration
CACHE_TTL=3600
ENABLE_REDIS_CACHE=true

# Rate Limiting
API_RATE_LIMIT=100/hour
WEB_RATE_LIMIT=1000/hour

# Backup Configuration
ENABLE_AUTO_BACKUP=false
BACKUP_FREQUENCY=daily
BACKUP_RETENTION_DAYS=30
