---
description: 
globs: 
alwaysApply: true
---
---
description: CRITICAL file organization rules to keep the project clean and maintainable. Prevents root directory pollution
globs: ["**/*", "!.git/**", "!venv/**", "!__pycache__/**", "!*.pyc", "!node_modules/**"]
alwaysApply: true
---
# File Organization Rules

> **Related Rules:**
> - `@documentation-management` - Documentation file organization
> - `@backend-fastapi` - Backend-specific organization
> - `@frontend-nextjs` - Frontend-specific organization
> - `@docker-devops` - DevOps file organization

## ğŸš¨ CRITICAL: Root Directory Discipline

**NEVER create files in the root directory unless they are:**
1. **Standard project files**: README.md, LICENSE, CHANGELOG.md, CONTRIBUTING.md, CODE_OF_CONDUCT.md
2. **Essential configs**: .gitignore, pyproject.toml, poetry.lock, requirements.txt, docker-compose.yml
3. **Entry points**: main.py (for FastAPI), setup.py, cli.py
4. **CI/CD files**: .github/, Dockerfile, Procfile

**If you're about to create a file in root, STOP and ask:**
- Is this a standard project file that MUST be in root?
- Can this go in an existing subdirectory?
- Should I create a new subdirectory for this feature?

## ğŸ“ Project Directory Structure

```
chimera-researcher/
â”œâ”€â”€ chimera_researcher/         # Main Python package
â”‚   â”œâ”€â”€ agent.py               # Core functionality
â”‚   â”œâ”€â”€ config/                # Configuration modules
â”‚   â”œâ”€â”€ models/                # Data models (source_tracking.py, etc.)
â”‚   â”œâ”€â”€ retrievers/            # Search implementations
â”‚   â”œâ”€â”€ storage/               # Storage backends (project_storage.py, etc.)
â”‚   â”œâ”€â”€ graph/                 # Knowledge graph components
â”‚   â”œâ”€â”€ monitoring/            # Monitoring agents
â”‚   â””â”€â”€ utils/                 # Utilities
â”‚
â”œâ”€â”€ backend/                   # FastAPI application
â”‚   â”œâ”€â”€ server/                # API server
â”‚   â””â”€â”€ services/              # Business logic
â”‚
â”œâ”€â”€ frontend/                  # All frontend code
â”‚   â”œâ”€â”€ nextjs/                # Next.js application
â”‚   â””â”€â”€ vanilla/               # Vanilla JS version
â”‚
â”œâ”€â”€ tests/                     # All test files
â”‚   â”œâ”€â”€ unit/                  # Unit tests
â”‚   â”œâ”€â”€ integration/           # Integration tests
â”‚   â””â”€â”€ e2e/                   # End-to-end tests
â”‚
â”œâ”€â”€ docs/                      # All documentation
â”‚   â”œâ”€â”€ status/                # Project status
â”‚   â”œâ”€â”€ architecture/          # System design
â”‚   â”œâ”€â”€ features/              # Feature docs
â”‚   â”œâ”€â”€ api/                   # API reference
â”‚   â””â”€â”€ guides/                # User guides
â”‚
â”œâ”€â”€ examples/                  # Example scripts
â”‚   â”œâ”€â”€ basic/                 # Simple examples
â”‚   â”œâ”€â”€ advanced/              # Complex examples
â”‚   â””â”€â”€ templates/             # Reusable templates
â”‚
â”œâ”€â”€ scripts/                   # Automation scripts
â”‚   â”œâ”€â”€ setup/                 # Setup scripts
â”‚   â””â”€â”€ deploy/                # Deployment scripts
â”‚
â”œâ”€â”€ mcp_servers/               # MCP server implementations
â”œâ”€â”€ monitoring_reports/        # Generated reports
â”œâ”€â”€ monitoring_projects/       # Long-term project storage
â”œâ”€â”€ logs/                      # Application logs
â””â”€â”€ .archive/                  # Deprecated/old files
```

## ğŸ“ File Creation Guidelines

### Python Files
- **Source code**: Always in `chimera_researcher/` or `backend/`
- **Tests**: Always in `tests/` with proper subdirectories
- **Scripts**: Utility scripts go in `scripts/`
- **Examples**: Demo code goes in `examples/`

### Documentation
- **User docs**: `docs/` with category subdirectories
- **API docs**: `docs/api/`
- **Internal docs**: `docs/internal/`
- **Feature docs**: `docs/features/`
- **NEVER** scatter .md files in root (except standard ones)

### Configuration
- **App configs**: Use `config/` directories within modules
- **Environment examples**: `config_examples/`
- **Docker configs**: Root level is OK for docker-compose.yml

### Generated Files
- **Reports**: `monitoring_reports/` or feature-specific directories
- **Logs**: `logs/` directory
- **Temp files**: Use system temp or `.tmp/` directory
- **Build artifacts**: `.build/` or `dist/`

## ğŸ¯ Decision Tree for File Placement

```
Need to create a file?
â”‚
â”œâ”€ Is it a standard root file? (README, LICENSE, etc.)
â”‚  â””â”€ Yes â†’ Create in root
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â”œâ”€ Is it Python source code?
â”‚  â””â”€ Yes â†’ chimera_researcher/ or backend/
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â”œâ”€ Is it a test?
â”‚  â””â”€ Yes â†’ tests/ with proper subdirectory
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â”œâ”€ Is it documentation?
â”‚  â””â”€ Yes â†’ docs/ with category subdirectory
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â”œâ”€ Is it frontend code?
â”‚  â””â”€ Yes â†’ frontend/nextjs/ or frontend/vanilla/
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â”œâ”€ Is it an example/demo?
â”‚  â””â”€ Yes â†’ examples/
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â””â”€ Create appropriate new subdirectory
```

## âš ï¸ Common Mistakes to Avoid

1. **Creating test_*.py files in root** â†’ Use `tests/`
2. **Putting documentation in root** â†’ Use `docs/`
3. **Scattered config files** â†’ Group in `config/` or `config_examples/`
4. **Random utility scripts in root** â†’ Use `scripts/`
5. **Feature files in root** â†’ Create feature directory in appropriate module

## ğŸ† Good Examples

âœ… **Creating a new monitoring feature:**
```
chimera_researcher/monitoring/continuous_watcher.py  # Source
tests/unit/monitoring/test_continuous_watcher.py     # Tests
docs/features/continuous-monitoring.md                # Docs
examples/continuous_monitoring_demo.py                # Demo
```

âœ… **Adding a new storage backend:**
```
chimera_researcher/storage/redis_storage.py          # Implementation
tests/integration/test_redis_storage.py              # Tests
docs/architecture/STORAGE_BACKENDS.md                # Documentation
```

âŒ **Bad Example:**
```
test_new_feature.py                                  # Wrong! Test in root
NEW_FEATURE_PLAN.md                                  # Wrong! Doc in root
my_utility_script.py                                 # Wrong! Script in root
```

Remember: A clean project structure makes everyone's life easier :-)
