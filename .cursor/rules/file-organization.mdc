---
description: 
globs: 
alwaysApply: true
---
---
description: "File organization rules to keep ClipScribe clean and maintainable"
globs: ["**/*", "!.git/**", "!__pycache__/**", "!*.pyc", "!output/**", "!logs/**"]
alwaysApply: true
---

# File Organization Rules

## ğŸš¨ CRITICAL: Root Directory Discipline

**NEVER create files in the root directory unless they are:**
1. **Standard project files**: README.md, LICENSE, CHANGELOG.md, pyproject.toml, poetry.lock
2. **Essential configs**: .gitignore, .env.example, pytest.ini
3. **Entry points**: None for ClipScribe (it's installed as a package)

**If you're about to create a file in root, STOP and ask:**
- Is this a standard project file that MUST be in root?
- Can this go in an existing subdirectory?
- Should I create a new subdirectory for this type of file?

## ğŸ“ ClipScribe Directory Structure

```
clipscribe/
â”œâ”€â”€ src/clipscribe/         # Main package source
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ commands/           # CLI commands
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ cli.py
â”‚   â”œâ”€â”€ config/             # Configuration
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ settings.py
â”‚   â”œâ”€â”€ extractors/         # Knowledge extractors
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ spacy_extractor.py
â”‚   â”‚   â”œâ”€â”€ gliner_extractor.py
â”‚   â”‚   â”œâ”€â”€ rebel_extractor.py
â”‚   â”‚   â””â”€â”€ hybrid_extractor.py
â”‚   â”œâ”€â”€ retrievers/         # Video/audio processing
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ youtube_client.py
â”‚   â”‚   â”œâ”€â”€ transcriber.py
â”‚   â”‚   â””â”€â”€ video_retriever.py
â”‚   â”œâ”€â”€ utils/              # Utilities
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ filename.py
â”‚   â”‚   â””â”€â”€ logging.py
â”‚   â”œâ”€â”€ models.py           # Data models
â”‚   â””â”€â”€ version.py          # Version info
â”‚
â”œâ”€â”€ tests/                  # All tests
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py
â”‚   â”œâ”€â”€ unit/               # Unit tests
â”‚   â”œâ”€â”€ integration/        # Integration tests
â”‚   â””â”€â”€ fixtures/           # Test data
â”‚
â”œâ”€â”€ docs/                   # Documentation
â”‚   â”œâ”€â”€ README.md           # Docs overview
â”‚   â”œâ”€â”€ GETTING_STARTED.md
â”‚   â”œâ”€â”€ CLI_REFERENCE.md
â”‚   â”œâ”€â”€ DEVELOPMENT.md
â”‚   â”œâ”€â”€ OUTPUT_FORMATS.md
â”‚   â”œâ”€â”€ PLATFORMS.md
â”‚   â””â”€â”€ VISUALIZING_GRAPHS.md
â”‚
â”œâ”€â”€ examples/               # Example scripts
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ quick_start.py
â”‚   â”œâ”€â”€ advanced_extraction_demo.py
â”‚   â””â”€â”€ batch_processing.py
â”‚
â”œâ”€â”€ scripts/                # Utility scripts
â”‚   â”œâ”€â”€ convert_to_gephi.py
â”‚   â””â”€â”€ view_knowledge_graph.py
â”‚
â”œâ”€â”€ output/                 # Generated output (git-ignored)
â”‚   â””â”€â”€ YYYYMMDD_platform_id/
â”‚
â”œâ”€â”€ logs/                   # Log files (git-ignored)
â”‚
â”œâ”€â”€ .cursor/                # Cursor IDE rules
â”‚   â””â”€â”€ rules/
â”‚
â””â”€â”€ structured_output/      # Legacy output directory
```

## ğŸ“ File Placement Guidelines

### Python Source Files
- **Package code**: Always in `src/clipscribe/`
- **Tests**: Always in `tests/` with proper subdirectories
- **Scripts**: Utility scripts in `scripts/`
- **Examples**: Demo code in `examples/`

### Documentation
- **User docs**: In `docs/`
- **Code docs**: Docstrings in source files
- **Rule docs**: In `.cursor/rules/`
- **NEVER** scatter .md files in root (except README, CHANGELOG, LICENSE)

### Generated Files
- **Output**: Always in `output/` subdirectories
- **Logs**: Always in `logs/`
- **Cache**: Use system temp or `.cache/`
- **Never** commit generated files

### Configuration
- **Package config**: `src/clipscribe/config/`
- **Environment**: `.env` files in root (git-ignored)
- **Examples**: `.env.example` in root

## ğŸ¯ Decision Tree for File Placement

```
Need to create a file?
â”‚
â”œâ”€ Is it a standard root file? (README, LICENSE, etc.)
â”‚  â””â”€ Yes â†’ Create in root
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â”œâ”€ Is it Python source code?
â”‚  â””â”€ Yes â†’ src/clipscribe/ with appropriate submodule
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â”œâ”€ Is it a test?
â”‚  â””â”€ Yes â†’ tests/ with proper subdirectory
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â”œâ”€ Is it documentation?
â”‚  â””â”€ Yes â†’ docs/
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â”œâ”€ Is it an example/demo?
â”‚  â””â”€ Yes â†’ examples/
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â”œâ”€ Is it a utility script?
â”‚  â””â”€ Yes â†’ scripts/
â”‚  â””â”€ No â†’ Continue â†“
â”‚
â””â”€ Create appropriate subdirectory or reconsider
```

## âš ï¸ Common Mistakes to Avoid

1. **Creating random .py files in root** â†’ Use appropriate directories
2. **Putting docs in root** â†’ Use `docs/` directory
3. **Mixing test files with source** â†’ Keep tests separate
4. **Committing output files** â†’ These should be git-ignored
5. **Creating new top-level directories** â†’ Consider existing structure first

## ğŸ† Good Examples

âœ… **Adding a new extractor:**
```
src/clipscribe/extractors/gemini_extractor.py
tests/unit/test_gemini_extractor.py
docs/EXTRACTORS.md (if needed)
```

âœ… **Adding a utility function:**
```
src/clipscribe/utils/cost_calculator.py
tests/unit/test_cost_calculator.py
```

âŒ **Bad Example:**
```
gemini_test.py          # Wrong! Test file in root
NEW_FEATURE_NOTES.md    # Wrong! Doc in root
my_script.py            # Wrong! Script in root
```

Remember: A clean project structure makes development and maintenance easier :-)
