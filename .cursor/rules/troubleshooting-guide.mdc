---
description: 
globs: 
alwaysApply: true
---
---
description: "Common troubleshooting patterns and solutions for ClipScribe issues"
globs: ["**/*.py", "docs/TROUBLESHOOTING.md", "**/error*.py", "**/exception*.py"]
alwaysApply: true
---

# Troubleshooting Patterns

## Core Debugging Philosophy

1. **Logs First**: Always check logs before asking for help
2. **Isolate the Problem**: Minimal reproduction cases
3. **Test Assumptions**: Verify environment, keys, connectivity
4. **Incremental Validation**: Test each component separately

## Common Issue Categories

### 1. Environment Issues
- **API Keys**: Missing or invalid credentials
- **Dependencies**: Version conflicts, missing packages
- **Permissions**: File access, network restrictions

### 2. Processing Failures
- **Video Access**: Private, geo-blocked, or deleted content
- **Memory**: Large files exceeding system capacity
- **Rate Limits**: API quota exceeded

### 3. Output Problems
- **Encoding**: Unicode/UTF-8 issues
- **File Corruption**: Incomplete writes, disk full
- **Format Errors**: Invalid JSON, malformed structures

## Debugging Techniques

### Enable Debug Logging
```bash
# Environment variable
export CLIPSCRIBE_LOG_LEVEL=DEBUG

# CLI flag
clipscribe process "URL" --log-level DEBUG
```

### Validation Before Deployment
```python
# Test basic functionality first
def validate_basic_setup():
    """Validate core components work."""
    # 1. Import validation
    # 2. API key validation  
    # 3. Model loading validation
    # 4. Basic processing test
```

### Error Recovery Patterns
```python
# Graceful degradation
try:
    result = expensive_operation()
except SpecificError:
    logger.warning("Falling back to alternative method")
    result = fallback_operation()
```

## Quick Fixes

### Reset Environment
```bash
# Clear caches and reinstall
rm -rf .venv poetry.lock __pycache__
poetry install
```

### Test Minimal Case
```python
# Use known-good test case
test_url = "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
```

## Best Practices

1. **Log Everything**: Errors, warnings, and progress
2. **Fail Fast**: Validate inputs early
3. **Provide Context**: Include relevant details in error messages
4. **Test Edge Cases**: Empty inputs, network failures, invalid data
5. **Document Solutions**: Add to docs/TROUBLESHOOTING.md

Remember: When in doubt, check the logs! They usually point to the real issue :-)
